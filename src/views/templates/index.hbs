<p>{{ text }}</p>
<div id="mapid"></div>
<script>
  console.log("{{{text}}}")
  const currentPosition = JSON.parse("{{{currentPosition}}}")
      // Andorra
      var map = L.map("mapid").setView(currentPosition, 18);
      // Rovinj
      //- var map = L.map("mapid").setView([45.0808344, 13.6383927], 8);

      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution:
          '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
      }).addTo(map);

  L.circle(currentPosition, {radius: 1000, color: "#EE4B2B"}).addTo(map);

  const locationBounds = JSON.parse("{{{locationBounds}}}");
  console.log(locationBounds)
  L.rectangle(locationBounds).addTo(map);
  const proximityBounds = JSON.parse("{{{proximityBounds}}}");
  proximityBounds.forEach(bounds => L.rectangle(bounds).addTo(map))
  const edges = JSON.parse("{{{edges}}}");
  edges.forEach(edge => L.polyline(edge, {color: 'red'}).addTo(map))

  const closest = JSON.parse("{{{closestPoint}}}")
  console.log(closest)
  L.circle(closest, {radius: 5, color: "#EE4B2B"}).addTo(map);

const midpointLatLng = JSON.parse("{{{midpointLatLng}}}")
   L.curve(
	[
		'M', currentPosition,
		'Q', midpointLatLng,
			 closest
	], {
	color: 'rgba(255,255,255,0.5)',
	weight: 5,
   dashArray: '8, 8', dashOffset: '8'
}).addTo(map);

   
</script>